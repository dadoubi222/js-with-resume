<!DOCTYPE html>
<html>
	<head>
		<title>我的网页</title>
		<link rel="stylesheet" href="./main.css">
		<script src="//at.alicdn.com/t/font_773846_rtrpbtu7ccn.js"></script>
		<style type="text/css">
			.loading{
				width: 200px;
				height: 200px;
				position: relative;
			}
			.loading::before,.loading::after{
				content: '';
				position: absolute;
				width: 0px;
				height: 0px;
				background: black;
				border-radius: 50%;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				margin: auto;
				animation: s 1.5s linear infinite;
			}
			.loading::after{
				animation-delay: 0.75s;
			}
			@keyframes s{
				0%{
					width: 0px;
					height: 0px;
					opacity: 1;
				}
				100%{
					width: 100px;
					height: 100px;
					opacity: 0;
				}
			}
			.icon {
			   width: 1em; height: 1em;
			   vertical-align: -0.15em;
			   fill: currentColor;
			   overflow: hidden;
			}
			.site-welcome{
				display: none;
				position: fixed;
				top: 0;
				bottom: 0;
				left: 0;
				right: 0;
				height: 100%;
				background: gray;
				z-index: 1;
				justify-content: center;
				align-items: center;
			}
			.site-welcome.active{
				display: flex;
			}
		</style>
	</head>
	<body>
		<div id="siteWelcome" class="site-welcome active">
			<div class="loading"></div>
		</div>
		<div id="topNavBar" class="topNavBar">
			<div class="topNavBar-inner clearfix">
				<a class="logo" href="#" alt="logo" style="float: left;">
						<span class="rs">RS</span><span class="card">card</span>
				</a>
				<nav class="menu" style="float: right;">
					<ul class="clearfix">
						<li><a href="#siteAbout">关于</a></li>
						<li><a href="#siteSkills">技能</a></li>
						<li>
							<a href="#siteWorks">作品</a>
							<ul class="submenu">
								<li>作品</li>
								<li>作品</li>
								<li>作品</li>
							</ul>
						</li>
						<li>
							<a  href="#">博客</a>
							<ul class="submenu">
								<li>博客</li>
								<li>博客</li>
								<li>博客</li>
							</ul>
						</li>
						<li><a href="#">日历</a></li>
						<li><a href="#">联系方式</a></li>
						<li><a href="#">其他</a></li>
					</ul>
				</nav>
			</div>
		</div>
		<div class="banner">
			<div class="mask-banner"></div>
		</div>
		<main>
			<div data-x id="siteAbout" class="userCard">
				<div class="pictureAndText clearfix">
					<div class="picture">
						<img src="./img/img_head-portrait.jpg" width="299px" height="347px" alt="头像">
					</div>
					<div class="text">
						<span class="welcome">Hello
							<span class="triangle"></span>
						</span>
						<h1>菜鸡的秘密</h1>
						<p>前端开发工程师</p>
						<hr>
						<dl>
							<dt>年龄</dt>
							<dd>9</dd>
							<dt>所在城市</dt>
							<dd>深圳</dd>
							<dt>邮箱</dt>
							<dd>12345678901@11.com</dd>
							<dt>手机</dt>
							<dd>12345678901</dd>
							<dt></dt>
							<dd></dd>
						</dl>
					</div>
				</div>
				<footer class="media">
						<a href="#">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-jianshu"></use>
							</svg>
						</a>
						<a href="#">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-jirengulogozaoqi"></use>
							</svg>
						</a>
						<a href="#">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-twitter"></use>
							</svg>
						</a>
						<a href="#">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-weibo"></use>
							</svg>
						</a>
						<a href="#">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-github"></use>
							</svg>
						</a>
					</footer>
			</div>
			<p class="downloadResume-wrapper">
				<a class="downloadResume" href="./resume.pdf" target="_blank" download>下载PDF简历</a>
			</p>
			<p class="selfIntroduction">
				一位仍在学习的小菜鸡
			</p>
		</main>
		<section data-x id="siteSkills" class="skills">
			<h2>技能</h2>
			<ol class="clearfix">
				<li>
					<h3>HTML 5 &amp; CSS</h3>
					<div class="progressBar">
						<div class="progress" style="width: 10%"></div>
					</div>
				</li>
				<li>
					<h3>JavaScript</h3>
					<div class="progressBar">
						<div class="progress" style="width: 10%"></div>
					</div>
				</li>
				<li>
					<h3>jQuery</h3>	
					<div class="progressBar">
						<div class="progress" style="width: 10%"></div>
					</div>
				</li>
				<li>
					<h3>Vue</h3>
					<div class="progressBar">
						<div class="progress" style="width: 10%"></div>
					</div>
				</li>
				<li>
					<h3>React</h3>
					<div class="progressBar">
						<div class="progress" style="width: 10%"></div>
					</div>
				</li>
				<li>
					<h3>Node.js</h3>
					<div class="progressBar">
						<div class="progress" style="width: 10%"></div>
					</div>
				</li>
			</ol>
		</section>
		<section data-x id="siteWorks" class="portfolio">
			<h2>作品集</h2>
			<nav>
				<ol class="clearfix">
					<li id="portfolioAll">所有</li>
					<li id="portfolioFramework">框架</li>
					<li id="portfolioVallina">原生JS &amp; CSS</li>
				</ol>
				<div id="portfolioBar" class="bar state-1">
					<div class="bar-inner"></div>
				</div>
			</nav>
			<script>
				portfolioAll.onclick = function(){
					portfolioBar.className = "bar state-1"
				}
				portfolioFramework.onclick = function(){
					portfolioBar.className = "bar state-2"
				}
				portfolioVallina.onclick = function(){
					portfolioBar.className = "bar state-3"
				}
			</script>
			<div class="works" style="height: 576px;">
				<div class="big" style="top: 0;left: 0;">
					<img src="./img/portfolio-1.jpg" alt="portfolio1">
				</div>
				<div class="small" style="top: 0;left: 645px;">
					<img src="./img/portfolio-2.jpg" alt="portfolio2">
				</div>
				<div class="small" style="top: 297px;left: 645px;">
					<img src="./img/portfolio-3.jpg" alt="portfolio3">
				</div>
			</div>
		</section>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.2.0/Tween.min.js"></script>
		<script>
			//加载动画
			setTimeout(function(){
				siteWelcome.classList.remove('active')
			},300)
			//页面滚动
			let specialTags = document.querySelectorAll('[data-x]');
			for(let i=0;i<specialTags.length;i++){
				specialTags[i].classList.add('offset');
			}
			setTimeout(function(){actionOnScroll()},500)
			window.onscroll = function(){
				if(window.scrollY > 0){
					topNavBar.classList.add('sticky');
				}else{
					topNavBar.classList.remove('sticky');
				}
				actionOnScroll();
			}
			//导航栏菜单被选中(未点击)
			let liTags  = document.querySelectorAll('nav.menu > ul > li');
			for(let i=0; i<liTags.length;i++){
				liTags[i].onmouseenter = function(f){
					let li = f.currentTarget.classList.add('active');
				}
				liTags[i].onmouseleave = function(f){
					let li = f.currentTarget.classList.remove('active');
				}
			}
			//点击跳转
			let aTags = document.querySelectorAll('nav > ul > li > a');
			function animate(time) {
			    requestAnimationFrame(animate);
			    TWEEN.update(time);
			}
			requestAnimationFrame(animate);
			for(let i=0;i<aTags.length;i++){
				aTags[i].onclick = function(f){
					f.preventDefault();
					let a = f.currentTarget;
					let href = a.getAttribute('href');
					let element = document.querySelector(href);
					let top =  element.offsetTop;
					let currentTop = window.scrollY;
					let targetTop = top - 80;
					let s = targetTop - currentTop;
					var coords = { y: currentTop}; 
					var t = Math.abs((s/100)*300);
					if(t>500){ t=500 };
					var tween = new TWEEN.Tween(coords) 
				        .to({ y: targetTop},t)
				        .easing(TWEEN.Easing.Quadratic.Out)
				        .onUpdate(function() {
				        	console.log(coords.y)
							window.scrollTo(0,coords.y);
				        })
				    	.start();
					}
			}
			function actionOnScroll(){
				let specialTags = document.querySelectorAll('[data-x]');
				let minIndex = 0;
				for(let i=0;i<specialTags.length;i++){
					if(Math.abs(specialTags[i].offsetTop-window.scrollY) < Math.abs(specialTags[minIndex].offsetTop-window.scrollY)){
						minIndex = i;
					}
				}
				specialTags[minIndex].classList.remove('offset');
				let id = specialTags[minIndex].id;
				let a = document.querySelector('a[href="#'+id+'"]');
				let li = a.parentNode;
				let brothers = li.parentNode.children;
				for(let i=0;i<brothers.length;i++){
					brothers[i].classList.remove('highLight');
				}
				li.classList.add('highLight');
			}
		</script>
	</body>
</html>